{% extends 'layouts/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{{ view_name|default:_("Confirm Delete") }}{% endblock title %}
{% block bodyclass %}hold-transition sidebar-mini layout-fixed{% endblock bodyclass %}

{% block content %}
<div class="content-wrapper">
  <section class="bg-white rounded shadow p-3 mb-1 mt-auto">
    <div class="container-fluid">

      <div class="row justify-content-center mt-4">
        <div class="col-md-6">
          <div class="card card-danger">
            <div class="card-header">
              <h3 class="card-title">{{ view_name|default:_("Confirm Delete") }}</h3>
            </div>
            <div class="card-body">
              <p>{{ delete_message|default:_("Are you sure you want to delete this item? This action cannot be undone.") }}</p>
              {% if fields %}
                <ul class="list-group mb-3">
                  {% for field in fields %}
                    <li class="list-group-item">
                      <strong>{{ field.name }}:</strong> {{ field.value }}
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
            <div class="card-footer text-end">
              <form method="post">
                {% csrf_token %}
                <a href="{{ cancel_url|default:back_url }}" class="btn btn-secondary">
                  {{ cancel_text|default:_("Cancel") }}
                </a>
                <button type="submit" class="btn btn-danger">
                  {{ submit_text|default:_("Delete") }}
                  <span class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>
</div>
{% endblock content %}

{% block extra_scripts %}
<script>
document.addEventListener("DOMContentLoaded", function() {
  const form = document.querySelector('form');
  const submitBtn = form.querySelector('button[type="submit"]');
  form.addEventListener('submit', function() {
    submitBtn.disabled = true;
    const spinner = submitBtn.querySelector('.spinner-border');
    if (spinner) spinner.classList.remove('d-none');
  });
});
</script>
{% endblock extra_scripts %}
